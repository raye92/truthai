import { useAuthenticator } from "@aws-amplify/ui-react";
import { ChatInput } from "./components/ChatInput";
import { MessageBubble } from "./components/MessageBubble";
import { useChat } from "./hooks/useChat";
import "./App.css";

export default function App() {
  const { user, signOut } = useAuthenticator();
  const { messages, isLoading, sendMessage } = useChat();

  return (
    <div className="app-container">
      <aside className="sidebar">
        <div className="sidebar-header">
          <div className="logo-container">
            <svg xmlns="http://www.w3.org/2000/svg" width="1365.33333" height="1365.33333" version="1.0" viewBox="0 0 1024 1024"><path d="M451 163.1c-28.4 3.6-59.1 16-82.2 33.1-45.2 33.5-69.4 90.3-64.8 152.5 2.3 32.7 7.6 48.1 28.4 82.7C351 462.4 355 472 355 486c0 18.2-9.6 36.2-22.8 42.7-5 2.4-6.9 2.8-14.8 2.8-8.4 0-9.6-.3-16-3.5-13.6-7-16-14.4-17.4-52.5-.9-24.4-2.2-30.9-8.4-43.3-12.4-24.5-32.4-36.7-57.6-34.9-12.5.9-24.7 6.5-34.8 16.1-7.3 6.9-8.9 12-5.5 17.7 2.4 4 7.8 5.7 20.8 6.3 6.1.3 12.7 1.1 14.8 1.7 5 1.4 11 6.9 13.8 12.5 1.9 4.1 2.1 5.7 1.6 14.2-.3 5.4-1.2 12.2-2.1 15.2-7.6 26.1-8.1 29-8 43 0 11.7.4 14.5 2.6 21.2 6.2 18.5 17.3 31.9 35.9 42.8 13.9 8.3 27.6 12 47.8 12.9l14.5.6-7.6 9c-4.2 4.9-12.2 13.5-18 19.1-11.4 11.1-14.3 12.6-30.8 16.6-7 1.6-10.7 1.9-20.5 1.5-6.6-.3-13.7-1-15.9-1.7-2.2-.7-6.5-3.6-10.1-7-5.1-4.7-7.1-6-10.8-6.5-6.6-1-8-.4-10.4 4.5-3 5.7-2.9 11.9.1 19.3 6.5 15.7 26.2 36.3 40.9 42.6 16.6 7.1 40.6 6.6 65.7-1.5 22.8-7.3 35.9-16.2 56.9-38.4 8-8.5 16.2-17.2 18.2-19.2 3.6-3.8 7.9-5.1 7.9-2.4 0 .7-2 6-4.5 11.7-10.5 24-15.2 44.9-14.2 63.9 2.2 42.1 25.8 71.5 67.2 83.5 7 2 10.9 2.5 19.9 2.5 17.2 0 23.2-2.6 24.2-10.5.8-5.8-2.1-9.5-15.1-19.2-13.2-9.8-18.5-15.4-22.5-23.7-8-16.9-8.3-37-.9-58.7 6.4-18.7 21-39.9 30.5-44.4 5.3-2.5 12.6-2.2 17.8.9 10.9 6.4 16.4 17.3 20.1 40.1 4.9 30.1 12.9 47.3 30.4 65.9 12.9 13.7 25.4 21.6 43.1 27.5 16 5.3 25.7 6.6 38 5.3 23.4-2.6 32.3-6.7 36.4-16.6 4.3-10.4.9-13.9-17.3-17.6-14.2-2.9-20.1-5.3-29.1-12.1-18.9-14.3-25.8-27.7-31-61.1-7.2-46-7-43.4-3.9-44.3 1.2-.4 2.4-.3 2.8.2.5.4 5.7 7.3 11.7 15.3 15.4 20.4 21.4 27.5 30.7 35.8 26.9 24 61.9 38.2 94.1 38.2 19 0 36.5-3.8 50.1-10.8 10.7-5.6 31.7-27.7 38-40 2.2-4.5 3.1-20.1 1.3-22.2-4.7-5.7-10.4-6.4-14.5-2-2.5 2.7-8.3 6.3-25.8 16.1-22.7 12.7-58.7 4.7-83.4-18.6-10.7-10.1-30.7-38.4-29.9-42.4.2-.9 3.7-2.3 9.7-3.8 28-7 46.9-26.9 52.7-55.7 3.8-18.6 17.8-34.4 32.4-36.3 2.7-.4 6.6.3 12.5 2.1 4.8 1.5 10 2.6 11.7 2.4 3.7-.4 6.6-3.9 7.5-9.1 1.3-8.3-10-23.9-23.3-31.9-10.4-6.3-15.8-8-27.6-8.6-12.9-.6-20.2 1.3-35 9-13.5 7.1-19.2 12.5-28 26.6-4 6.4-9.5 14-12.3 16.7-12.1 12.2-27.2 13.8-34.2 3.6-5.3-7.7-6.8-28.1-3.3-42.9 1.1-4.5 4.6-15.3 7.9-24 16.1-42.9 20.6-65.9 20.6-103.7-.1-47.4-9.3-78.9-32.8-112-10.2-14.5-28.9-34.1-39.7-41.7-20.2-14.2-44.5-23.6-70-27.3-11.3-1.6-36.2-1.8-47-.4zm1.8 232.5c4.5.9 11.1 7 13.8 12.8 4.4 9.5 2.2 21.9-5.2 28.8-8.6 8-21.8 6-28.7-4.5-4.1-6.3-5.7-10.7-5.7-16 0-8 6.9-17.4 15.1-20.3 4-1.5 6.5-1.6 10.7-.8zm134 4.5c6.4 3.1 9.6 8.5 10 16.9.5 8.3-1 13.1-5.5 18.1-3.9 4.3-8.2 5.9-15.7 5.9-7.9 0-13-3-16.2-9.7-6.3-12.7-3.1-26.8 7-31.4 5.7-2.6 14.7-2.5 20.4.2z"/></svg>
          </div>
          <div className="app-title">
            <h1>CurateAI</h1>
            <p>Multi-LLM Aggregator</p>
          </div>
        </div>

        <div className="sidebar-footer">
          <button onClick={signOut} className="sign-out-btn">
            Sign out
          </button>
        </div>
      </aside>

      <main className="chat-main">
        <div className="messages-container">
          {messages.length === 0 && (
            <div className="empty-state">
              <p>
                Ask a question and get curated answers from multiple AI models
              </p>
            </div>
          )}
          {messages.map((message, idx) => (
            <MessageBubble key={idx} message={message} />
          ))}
          {isLoading && (
            <div className="loading-indicator">
              <span>Aggregating responses from multiple LLMs...</span>
            </div>
          )}
        </div>

        <div className="chat-input-container">
          <ChatInput onSendMessage={sendMessage} isLoading={isLoading} />
        </div>
      </main>
    </div>
  );
}
